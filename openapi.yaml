openapi: 3.0.2
info:
  title: RTA in Japan Twitter API
  description: ""
  version: 1.1.0
externalDocs:
  description: Twitter API References
  url: https://developer.twitter.com/en/docs/api-reference-index
servers:
- url: https://localhost:3000/
paths:
  /statuses/user_timeline:
    get:
      description: "規定のアカウントのタイムライン(home)を取得する。"
      tags:
      - statuses
      parameters:
        - in: header
          name: X-Auth
          schema:
            type: string
            example: "ABCDEFG123456"
      responses:
        200:
          description: ""
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/statusesResponse'
              examples:
                response1:
                  $ref: '#/components/examples/statusResponse1'
        503:
          description: ""
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
  /statuses/mentions_timeline:
    get:
      description: "規定のアカウントに対するメンションを取得する。"
      tags:
      - statuses
      parameters:
        - in: header
          name: X-Auth
          schema:
            type: string
            example: "ABCDEFG123456"
      responses:
        200:
          description: ""
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/statusesResponse'
        503:
          description: ""
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
  /statuses/hash:
    get:
      description: "規定のハッシュタグで検索した結果を取得する。"
      tags:
      - statuses
      parameters:
        - in: header
          name: X-Auth
          schema:
            type: string
            example: "ABCDEFG123456"
      responses:
        200:
          description: ""
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/statusesResponse'
        503:
          description: ""
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
  /statuses/update:
    post:
      description: "ツイート投稿する"
      tags:
      - statuses
      parameters:
        - in: header
          name: X-Auth
          schema:
            type: string
            example: "ABCDEFG123456"
      requestBody:
        description: ""
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/requestUpdate'
            examples:
              request1:
                summary: "メディア無し"
                value: {
                  "status": "走者乙ｗｗｗｗｗｗｗｗｗｗｗｗ\nｗｗｗｗｗ\nｗｗｗｗｗｗｗｗｗｗｗｗｗｗ",
                  "media_ids": [],
                  "in_reply_to_tweet_id": null,
                  "quote_tweet_id": null
                }
              request2:
                summary: "メディア有り"
                value: {
                  "status": "走者乙ｗｗｗｗｗｗｗｗｗｗｗｗ",
                  "media_ids": [
                    "710511363345354753"
                  ],
                  "in_reply_to_tweet_id": null,
                  "quote_tweet_id": null
                }
              request2-1:
                summary: "メディア4枚"
                value: {
                  "status": "走者乙ｗｗｗｗｗｗｗｗｗｗｗｗ",
                  "media_ids": [
                    "1421878566539579392",
                    "1421878576962367491",
                    "1421878582134001668",
                    "1421878586374430724"
                  ],
                  "in_reply_to_tweet_id": null,
                  "quote_tweet_id": null
                }
              request3:
                summary: "返信有り"
                value: {
                  "status": "走者乙ｗｗｗｗｗｗｗｗｗｗｗｗ",
                  "media_ids": [],
                  "in_reply_to_tweet_id": "1421495434665553924",
                  "quote_tweet_id": null
                }
              request4:
                summary: "引用有り"
                value: {
                  "status": "走者乙ｗｗｗｗｗｗｗｗｗｗｗｗ",
                  "media_ids": [],
                  "in_reply_to_tweet_id": null,
                  "quote_tweet_id": "1421878914524147713"
                }
              response5:
                summary: "全部盛り"
                value: {
                  "status":"全部\n盛り",
                  "media_ids":["1421879381006323716"],
                  "in_reply_to_tweet_id":"1421879119529201664",
                  "quote_tweet_id":"1421879119529201664"
                }
      responses:
        200:
          description: "ツイート投稿後のstatuses/user_timelineに相当するもの"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/statusesResponse'
        503:
          description: ""
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
  /media/upload/:
    post:
      description: "画像、動画ファイルをアップロードする。"
      tags:
      - media
      parameters:
        - in: header
          name: X-Auth
          schema:
            type: string
            example: "ABCDEFG123456"
      requestBody:
        description: ""
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                # 'file' will be the field name in this multipart request
                file:
                  type: string
                  format: binary
      responses:
        200:
          description: ""
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  code:
                    type: "integer"
                    example: 0
                  data:
                    type: "object"
                    properties:
                      media_id_string:
                        type: string
                        example: "1234567890"

        503:
          description: ""
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
  /statuses/destroy/{id}:
    post:
      description: "指定したIDのツイートを削除する。"
      tags:
      - statuses
      parameters:
        - in: header
          name: X-Auth
          schema:
            type: string
            example: "ABCDEFG123456"
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: "削除対象のツイートID"
      responses:
        200:
          description: "処理実行後のstatuses/user_timelineに相当するもの"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/statusesResponse'
        503:
          description: ""
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
components:
    schemas:
      statusesResponse:
        type: object
        properties:
          code:
            type: integer
          data:
            type: array
            items:
              $ref: '#/components/schemas/statuses'
      statuses:
        type: object
        properties:
          id:
            type: string
            example: '1338971066773905408'
          text:
            type: string
            example: >-
              💡 Using Twitter data for academic research? Join our next
              livestream this Friday @ 9am PT on https://t.co/GrtBOXh5Y1!n
              n@SuhemParack will show how to get started with recent search &amp;
              filtered stream endpoints on the #TwitterAPI v2, the new Tweet
              payload, annotations, &amp; more. https://t.co/IraD2Z7wEg
        required:
          - id
          - text
      media:
        type: object
        properties:
          media_key:
            type: string
            example: '13_1263145212760805376'
          type:
            type: string
            enum:
              - animated_gif
              - photo
              - video
          url:
            type: string
          preview_image_url:
            type: string
            example: https://pbs.twimg.com/media/EYeX7akWsAIP1_1.jpg
          width:
            type: integer
            example: 1920
          height:
            type: integer
            example: 1080
        required:
          - media_key
          - type
          - url
          - preview_image_url
          - width
          - height
      statuses_entities:
        type: object
        properties:
          annotations:
            type: array
            items:
              type: object
          urls:
            type: array
            items:
              type: object
              properties:
                start:
                  type: integer
                  example: 10
                end:
                  type: integer
                  example: 33
                url:
                  type: string
                  example: https://t.co/9BbWekeWq2
                expanded_url:
                  type: string
                  example: https://twitter.com/TwitterDev/status/1374104599456534531
                display_url:
                  type: string
                  example: twitter.com/TwitterDev/sta…
              required:
                - start
                - end
                - url
                - expanded_url
                - display_url
          hashtags:
            type: array
            items:
              type: object
          mentions:
            type: array
            items:
              type: object
              properties:
                start:
                  type: number
                  example: 0
                end:
                  type: number
                  example: 11
                id:
                  type: string
                  example: '2244994945'
                username:
                  type: string
                  example: TwitterDev
              required:
                - start
                - end
                - id
                - username
          cashtags:
            type: array
            items:
              type: object
      user:
        type: object
        properties:
          id:
            type: string
            example: '2244994945'
          name:
            type: string
            example: Twitter Dev
          username:
            type: string
            example: TwitterDev
          created_at:
            type: string
            format: date-time
            example: '2013-12-14T04:35:55.000Z'
          profile_image_url:
            type: string
            example: >-
              https://pbs.twimg.com/profile_images/1267175364003901441/tBZNFAgA_normal.jpg
        required:
          - id
          - name
          - username
          - created_at
          - profile_image_url
      errorResponse:
        type: object
        properties:
          code:
            type: integer
          error:
            type: object
            properties:
              message:
                type: string
                example: エラー内容とかをここに
        example:
            code: 10
            error:
              message: ヤバイｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗ
      requestUpdate:
        type: object
        properties:
          status:
            description: ツイート本文
            type: string
            example: 走者乙ｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗｗ
          media_ids:
            description: 事前にアップロードした画像・動画のID
            type: array
            items:
              type: string
            example:
              - '710511363345354753'
          in_reply_to_tweet_id:
            description: リプライ先のツイートID
            type: string
            example: ''
          quote_tweet_id:
            description: 引用RTの引用元ツイートID
            type: string
            example: ''
    examples:
      statusResponse1:
        summary: 素のやつ
        value:
          code: 0
          data:
            - id: '1578074395490521088'
              text: 'じゅげむ　じゅげむ　ごこうのすりきれ\nかいじゃりすいぎょの　すいぎょうまつ\n\nうんらいまつ　ふうらいまつ\n\nくうねるところに　すむところ\n\nやぶらこうじの　ぶらこうじ\n\nパイポパイポ\n\nパイポのシューリンガン\n\nシューリンガンのグーリンダイ\n\nグーリンダイのポンポコピーのポンポコナーの\n\nちょう'
  